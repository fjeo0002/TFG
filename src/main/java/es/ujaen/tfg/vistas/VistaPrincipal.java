/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package es.ujaen.tfg.vistas;

import com.formdev.flatlaf.FlatLightLaf;
import com.formdev.flatlaf.extras.FlatSVGIcon;
import es.ujaen.tfg.DAO.AnticipoDAO;
import es.ujaen.tfg.DAO.ClienteDAO;
import es.ujaen.tfg.DAO.FacturaDAO;
import es.ujaen.tfg.DAO.LocalDAO;
import es.ujaen.tfg.DAO.PreferenciasDAO;
import es.ujaen.tfg.DAO.UsuarioDAO;
import es.ujaen.tfg.Firebase.FirebaseInitializer;
import es.ujaen.tfg.controlador.AnticipoControlador;
import es.ujaen.tfg.controlador.ClienteControlador;
import es.ujaen.tfg.controlador.FacturaControlador;
import es.ujaen.tfg.controlador.LocalControlador;
import es.ujaen.tfg.controlador.PreferenciasControlador;
import es.ujaen.tfg.controlador.UsuarioControlador;
import es.ujaen.tfg.modelo.Usuario;
import es.ujaen.tfg.observer.Observador;
import es.ujaen.tfg.orden.UndoManager;
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.io.IOException;
import java.util.concurrent.ExecutionException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

/**
 *
 * @author PCCA201
 */
public class VistaPrincipal extends javax.swing.JFrame implements Observador {

    private VistaPreferencias vistaPreferencias;
    private VistaCrearFactura vistaCrearFactura;
    private VistaCrearAnticipo vistaCrearAnticipo;

    private VistaUsuario vistaUsuario;
    private VistaCambiarContrasena vistaCambiarContrasena;
    private final Usuario usuario;

    private VistaRegistroAnticipos vistaRegistroAnticipos;
    private VistaContabilidad vistaContabilidad;

    private VistaClientes vistaClientes;
    private VistaLocales vistaLocales;

    private final UsuarioControlador usuarioControlador;
    private final ClienteControlador clienteControlador;
    private final LocalControlador localControlador;
    private final AnticipoControlador anticipoControlador;
    private final FacturaControlador facturaControlador;
    private final PreferenciasControlador preferenciasControlador;

    private final UndoManager undoManager;

    private final UsuarioDAO usuarioDAO;
    private final ClienteDAO clienteDAO;
    private final FacturaDAO facturaDAO;
    private final AnticipoDAO anticipoDAO;
    private final LocalDAO localDAO;
    private final PreferenciasDAO preferenciasDAO;

    /**
     * Creates new form VistaPrincipal
     *
     * @param email
     * @throws java.io.IOException
     * @throws java.util.concurrent.ExecutionException
     */
    public VistaPrincipal(String email) throws IOException, ExecutionException {
        initComponents();
        setLocationRelativeTo(null);

        jTabbedPaneCategorias.setIconAt(0, new FlatSVGIcon("svg/contabilidad.svg"));
        jTabbedPaneCategorias.setIconAt(1, new FlatSVGIcon("svg/registro_anticipos.svg"));

        //setExtendedState(JFrame.MAXIMIZED_BOTH); // Maximiza la ventana
        this.usuarioDAO = new UsuarioDAO(email);
        this.clienteDAO = new ClienteDAO(email);
        this.facturaDAO = new FacturaDAO(email);
        this.anticipoDAO = new AnticipoDAO(email);
        this.localDAO = new LocalDAO(email);
        this.preferenciasDAO = new PreferenciasDAO(email);

        this.usuarioControlador = new UsuarioControlador(usuarioDAO);
        this.clienteControlador = new ClienteControlador(clienteDAO, anticipoDAO, facturaDAO);
        this.localControlador = new LocalControlador(localDAO);
        this.anticipoControlador = new AnticipoControlador(clienteDAO, anticipoDAO, facturaDAO);
        this.facturaControlador = new FacturaControlador(clienteDAO, anticipoDAO, facturaDAO);
        this.preferenciasControlador = new PreferenciasControlador(preferenciasDAO);

        this.clienteControlador.agregarObservador(this);
        this.localControlador.agregarObservador(this);
        this.anticipoControlador.agregarObservador(this);
        this.facturaControlador.agregarObservador(this);

        this.undoManager = UndoManager.getInstance();

        this.usuario = usuarioControlador.leer(email);

        cargarVistaContabilidad();
        cargarVistaRegistroAnticipos();

        cargarVistaClientes();
        cargarVistaLocales();

        actualizarEstadoBotones();
        configurarAtajosTeclado();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanelPrincipal = new javax.swing.JPanel();
        jPanelCabecera = new javax.swing.JPanel();
        jPanelTitulo = new javax.swing.JPanel();
        jLabelTitulo = new javax.swing.JLabel();
        jPanelMenu = new javax.swing.JPanel();
        jPanelBotonesPrincipales = new javax.swing.JPanel();
        jButtonPreferencias = new javax.swing.JButton();
        jButtonDeshacer = new javax.swing.JButton();
        jButtonRehacer = new javax.swing.JButton();
        jButtonCrearFactura = new javax.swing.JButton();
        jButtonCrearAnticipo = new javax.swing.JButton();
        jPanelUsuario = new javax.swing.JPanel();
        jButtonUsuario = new javax.swing.JButton();
        jButtonCambiarContrasena = new javax.swing.JButton();
        jButtonCerrarSesion = new javax.swing.JButton();
        jTabbedPaneCategorias = new javax.swing.JTabbedPane();
        jPanelContabilidad = new javax.swing.JPanel();
        jPanelAnticipos = new javax.swing.JPanel();
        jPanelPiePagina = new javax.swing.JPanel();
        jPanelClientes = new javax.swing.JPanel();
        jPanelLocales = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Sistema de Facturación y Contabilidad");
        setBounds(new java.awt.Rectangle(0, 0, 0, 0));
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        setFont(new java.awt.Font("Segoe UI", 0, 12)); // NOI18N
        setLocation(new java.awt.Point(0, 0));
        setMinimumSize(new java.awt.Dimension(1450, 750));
        setName("VistaPrincipal"); // NOI18N
        setPreferredSize(new java.awt.Dimension(1350, 638));
        setSize(new java.awt.Dimension(0, 0));
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                formWindowClosing(evt);
            }
        });

        jPanelPrincipal.setBorder(javax.swing.BorderFactory.createEmptyBorder(10, 10, 10, 10));
        jPanelPrincipal.setName(""); // NOI18N

        jPanelCabecera.setToolTipText("");
        jPanelCabecera.setName(""); // NOI18N
        jPanelCabecera.setPreferredSize(new java.awt.Dimension(676, 74));
        jPanelCabecera.setLayout(new java.awt.GridLayout(2, 1, 10, 10));

        jPanelTitulo.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT));

        jLabelTitulo.setFont(new java.awt.Font("Segoe UI", 1, 24)); // NOI18N
        jLabelTitulo.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelTitulo.setText("Sistema de Facturación y Contabilidad");
        jPanelTitulo.add(jLabelTitulo);

        jPanelCabecera.add(jPanelTitulo);

        jPanelMenu.setLayout(new java.awt.GridLayout(1, 2));

        java.awt.FlowLayout flowLayout1 = new java.awt.FlowLayout(java.awt.FlowLayout.LEFT);
        flowLayout1.setAlignOnBaseline(true);
        jPanelBotonesPrincipales.setLayout(flowLayout1);

        jButtonPreferencias.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jButtonPreferencias.setIcon(new FlatSVGIcon("svg/preferencias.svg"));
        jButtonPreferencias.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        jButtonPreferencias.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonPreferenciasActionPerformed(evt);
            }
        });
        jPanelBotonesPrincipales.add(jButtonPreferencias);

        jButtonDeshacer.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jButtonDeshacer.setIcon(new FlatSVGIcon("svg/deshacer.svg"));
        jButtonDeshacer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDeshacerActionPerformed(evt);
            }
        });
        jPanelBotonesPrincipales.add(jButtonDeshacer);

        jButtonRehacer.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jButtonRehacer.setIcon(new FlatSVGIcon("svg/rehacer.svg"));
        jButtonRehacer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonRehacerActionPerformed(evt);
            }
        });
        jPanelBotonesPrincipales.add(jButtonRehacer);

        jButtonCrearFactura.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jButtonCrearFactura.setIcon(new FlatSVGIcon("svg/factura.svg"));
        jButtonCrearFactura.setText("Crear Factura");
        jButtonCrearFactura.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCrearFacturaActionPerformed(evt);
            }
        });
        jPanelBotonesPrincipales.add(jButtonCrearFactura);

        jButtonCrearAnticipo.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jButtonCrearAnticipo.setIcon(new FlatSVGIcon("svg/anticipo.svg"));
        jButtonCrearAnticipo.setText("Crear Anticipo");
        jButtonCrearAnticipo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCrearAnticipoActionPerformed(evt);
            }
        });
        jPanelBotonesPrincipales.add(jButtonCrearAnticipo);

        jPanelMenu.add(jPanelBotonesPrincipales);

        jPanelUsuario.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.RIGHT));

        jButtonUsuario.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jButtonUsuario.setIcon(new FlatSVGIcon("svg/usuario.svg"));
        jButtonUsuario.setText("Mi Cuenta");
        jButtonUsuario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonUsuarioActionPerformed(evt);
            }
        });
        jPanelUsuario.add(jButtonUsuario);

        jButtonCambiarContrasena.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jButtonCambiarContrasena.setIcon(new FlatSVGIcon("svg/contrasena.svg"));
        jButtonCambiarContrasena.setText("Cambiar Contraseña");
        jButtonCambiarContrasena.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCambiarContrasenaActionPerformed(evt);
            }
        });
        jPanelUsuario.add(jButtonCambiarContrasena);

        jButtonCerrarSesion.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jButtonCerrarSesion.setIcon(new FlatSVGIcon("svg/cerrar_sesion.svg"));
        jButtonCerrarSesion.setText("Cerrar Sesión");
        jButtonCerrarSesion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCerrarSesionActionPerformed(evt);
            }
        });
        jPanelUsuario.add(jButtonCerrarSesion);

        jPanelMenu.add(jPanelUsuario);

        jPanelCabecera.add(jPanelMenu);

        jTabbedPaneCategorias.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N

        jPanelContabilidad.setBackground(new java.awt.Color(255, 204, 204));

        javax.swing.GroupLayout jPanelContabilidadLayout = new javax.swing.GroupLayout(jPanelContabilidad);
        jPanelContabilidad.setLayout(jPanelContabilidadLayout);
        jPanelContabilidadLayout.setHorizontalGroup(
            jPanelContabilidadLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 1099, Short.MAX_VALUE)
        );
        jPanelContabilidadLayout.setVerticalGroup(
            jPanelContabilidadLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 311, Short.MAX_VALUE)
        );

        jTabbedPaneCategorias.addTab("Contabilidad", jPanelContabilidad);

        jPanelAnticipos.setBackground(new java.awt.Color(204, 255, 255));

        javax.swing.GroupLayout jPanelAnticiposLayout = new javax.swing.GroupLayout(jPanelAnticipos);
        jPanelAnticipos.setLayout(jPanelAnticiposLayout);
        jPanelAnticiposLayout.setHorizontalGroup(
            jPanelAnticiposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 1099, Short.MAX_VALUE)
        );
        jPanelAnticiposLayout.setVerticalGroup(
            jPanelAnticiposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 311, Short.MAX_VALUE)
        );

        jTabbedPaneCategorias.addTab("Anticipos", jPanelAnticipos);

        jPanelPiePagina.setLayout(new java.awt.GridLayout(1, 2));

        jPanelClientes.setBackground(new java.awt.Color(204, 204, 255));

        javax.swing.GroupLayout jPanelClientesLayout = new javax.swing.GroupLayout(jPanelClientes);
        jPanelClientes.setLayout(jPanelClientesLayout);
        jPanelClientesLayout.setHorizontalGroup(
            jPanelClientesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 549, Short.MAX_VALUE)
        );
        jPanelClientesLayout.setVerticalGroup(
            jPanelClientesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 183, Short.MAX_VALUE)
        );

        jPanelPiePagina.add(jPanelClientes);

        jPanelLocales.setBackground(new java.awt.Color(204, 255, 204));

        javax.swing.GroupLayout jPanelLocalesLayout = new javax.swing.GroupLayout(jPanelLocales);
        jPanelLocales.setLayout(jPanelLocalesLayout);
        jPanelLocalesLayout.setHorizontalGroup(
            jPanelLocalesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 549, Short.MAX_VALUE)
        );
        jPanelLocalesLayout.setVerticalGroup(
            jPanelLocalesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 183, Short.MAX_VALUE)
        );

        jPanelPiePagina.add(jPanelLocales);

        javax.swing.GroupLayout jPanelPrincipalLayout = new javax.swing.GroupLayout(jPanelPrincipal);
        jPanelPrincipal.setLayout(jPanelPrincipalLayout);
        jPanelPrincipalLayout.setHorizontalGroup(
            jPanelPrincipalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jTabbedPaneCategorias)
            .addComponent(jPanelPiePagina, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanelCabecera, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jPanelPrincipalLayout.setVerticalGroup(
            jPanelPrincipalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelPrincipalLayout.createSequentialGroup()
                .addComponent(jPanelCabecera, javax.swing.GroupLayout.PREFERRED_SIZE, 83, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTabbedPaneCategorias)
                .addGap(0, 0, 0)
                .addComponent(jPanelPiePagina, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanelPrincipal, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanelPrincipal, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButtonPreferenciasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonPreferenciasActionPerformed
        // TODO add your handling code here:
        vistaPreferencias = new VistaPreferencias(this, true, preferenciasControlador);
        vistaPreferencias.setVisible(true);
    }//GEN-LAST:event_jButtonPreferenciasActionPerformed

    private void jButtonCrearFacturaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCrearFacturaActionPerformed
        // TODO add your handling code here:
        vistaCrearFactura = new VistaCrearFactura(this, clienteControlador, localControlador, facturaControlador, anticipoControlador, preferenciasControlador, usuario);
        vistaCrearFactura.setVisible(true);
    }//GEN-LAST:event_jButtonCrearFacturaActionPerformed

    private void jButtonDeshacerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonDeshacerActionPerformed
        // TODO add your handling code here:
        if (undoManager.canUndo()) {
            undoManager.undo();
        }
        actualizarEstadoBotones();
    }//GEN-LAST:event_jButtonDeshacerActionPerformed

    private void jButtonCrearAnticipoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCrearAnticipoActionPerformed
        // TODO add your handling code here:
        vistaCrearAnticipo = new VistaCrearAnticipo(this, true, clienteControlador, anticipoControlador, facturaControlador, preferenciasControlador, usuario);
        vistaCrearAnticipo.setVisible(true);
    }//GEN-LAST:event_jButtonCrearAnticipoActionPerformed

    private void jButtonRehacerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonRehacerActionPerformed
        // TODO add your handling code here:
        if (undoManager.canRedo()) {
            undoManager.redo();
        }
        actualizarEstadoBotones();
    }//GEN-LAST:event_jButtonRehacerActionPerformed

    private void jButtonUsuarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonUsuarioActionPerformed
        // TODO add your handling code here:
        vistaUsuario = new VistaUsuario(this, usuario, usuarioControlador);
        vistaUsuario.setVisible(true);
    }//GEN-LAST:event_jButtonUsuarioActionPerformed

    private void jButtonCambiarContrasenaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCambiarContrasenaActionPerformed
        // TODO add your handling code here:
        vistaCambiarContrasena = new VistaCambiarContrasena(this, usuario, usuarioControlador);
        vistaCambiarContrasena.setVisible(true);
    }//GEN-LAST:event_jButtonCambiarContrasenaActionPerformed

    private void jButtonCerrarSesionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCerrarSesionActionPerformed
        try {
            // TODO add your handling code here:
            //usuarioDAO.sincronizarConFirebase();
            clienteDAO.sincronizarConFirebase();
            localDAO.sincronizarConFirebase();
            anticipoDAO.sincronizarConFirebase();
            facturaDAO.sincronizarConFirebase();

            clienteDAO.limpiarCache();
            localDAO.limpiarCache();
            anticipoDAO.limpiarCache();
            facturaDAO.limpiarCache();
            
            FirebaseInitializer.getInstance().limpiarCache();

            undoManager.limpiarUndoManager();

            VistaInicioSesión vistaInicioSesión = null;
            vistaInicioSesión = new VistaInicioSesión();
            vistaInicioSesión.setVisible(true);
            this.dispose();
        } catch (IOException ex) {
            Logger.getLogger(VistaPrincipal.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_jButtonCerrarSesionActionPerformed

    private void formWindowClosing(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowClosing
        try {
            // TODO add your handling code here:
            clienteDAO.limpiarCache();
            localDAO.limpiarCache();
            anticipoDAO.limpiarCache();
            facturaDAO.limpiarCache();
            
            FirebaseInitializer.getInstance().limpiarCache();
        } catch (IOException ex) {
            Logger.getLogger(VistaPrincipal.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_formWindowClosing

    private void actualizarEstadoBotones() {
        // Habilitar o deshabilitar los botones según el estado de las pilas en el UndoManager
        jButtonDeshacer.setEnabled(undoManager.canUndo());
        jButtonRehacer.setEnabled(undoManager.canRedo());
    }

    @Override
    public void actualizar() {
        actualizarEstadoBotones();
    }

    private void cargarVistaContabilidad() {
        vistaContabilidad = new VistaContabilidad(clienteControlador, facturaControlador, anticipoControlador);
        vistaContabilidad.setSize(jPanelContabilidad.getWidth(), jPanelContabilidad.getHeight());
        vistaContabilidad.setLocation(0, 0);

        jPanelContabilidad.setLayout(new BorderLayout());
        jPanelContabilidad.removeAll();
        jPanelContabilidad.add(vistaContabilidad, BorderLayout.CENTER);
        jPanelContabilidad.revalidate();
        jPanelContabilidad.repaint();
    }

    private void cargarVistaRegistroAnticipos() {
        vistaRegistroAnticipos = new VistaRegistroAnticipos(this, clienteControlador, anticipoControlador, facturaControlador);
        vistaRegistroAnticipos.setSize(jPanelAnticipos.getWidth(), jPanelAnticipos.getHeight());
        vistaRegistroAnticipos.setLocation(0, 0);

        jPanelAnticipos.setLayout(new BorderLayout());
        jPanelAnticipos.removeAll();
        jPanelAnticipos.add(vistaRegistroAnticipos, BorderLayout.CENTER);
        jPanelAnticipos.revalidate();
        jPanelAnticipos.repaint();
    }

    private void cargarVistaClientes() {
        vistaClientes = new VistaClientes(this, clienteControlador, facturaControlador, anticipoControlador);
        vistaClientes.setSize(jPanelClientes.getWidth(), jPanelClientes.getHeight());
        vistaClientes.setLocation(0, 0);

        jPanelClientes.setLayout(new BorderLayout());
        jPanelClientes.removeAll();
        jPanelClientes.add(vistaClientes, BorderLayout.CENTER);
        jPanelClientes.revalidate();
        jPanelClientes.repaint();
    }

    private void cargarVistaLocales() {
        vistaLocales = new VistaLocales(this, localControlador);
        vistaLocales.setSize(jPanelLocales.getWidth(), jPanelLocales.getHeight());
        vistaLocales.setLocation(0, 0);

        jPanelLocales.setLayout(new BorderLayout());
        jPanelLocales.removeAll();
        jPanelLocales.add(vistaLocales, BorderLayout.CENTER);
        jPanelLocales.revalidate();
        jPanelLocales.repaint();
    }

    private void configurarAtajosTeclado() {
        // Obtener InputMap y ActionMap
        InputMap inputMap = getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        ActionMap actionMap = getRootPane().getActionMap();

        // Asignar Ctrl + Z para Deshacer
        KeyStroke ctrlZ = KeyStroke.getKeyStroke(KeyEvent.VK_Z, KeyEvent.CTRL_DOWN_MASK);
        inputMap.put(ctrlZ, "deshacerAccion");
        actionMap.put("deshacerAccion", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                jButtonDeshacer.doClick(); // Simula el clic en el botón Deshacer
            }
        });

        // Asignar Ctrl + Shift + Z para Rehacer
        KeyStroke ctrlShiftZ = KeyStroke.getKeyStroke(KeyEvent.VK_Z, KeyEvent.CTRL_DOWN_MASK | KeyEvent.SHIFT_DOWN_MASK);
        inputMap.put(ctrlShiftZ, "rehacerAccion");
        actionMap.put("rehacerAccion", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                jButtonRehacer.doClick(); // Simula el clic en el botón Rehacer
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButtonCambiarContrasena;
    private javax.swing.JButton jButtonCerrarSesion;
    private javax.swing.JButton jButtonCrearAnticipo;
    private javax.swing.JButton jButtonCrearFactura;
    private javax.swing.JButton jButtonDeshacer;
    private javax.swing.JButton jButtonPreferencias;
    private javax.swing.JButton jButtonRehacer;
    private javax.swing.JButton jButtonUsuario;
    private javax.swing.JLabel jLabelTitulo;
    private javax.swing.JPanel jPanelAnticipos;
    private javax.swing.JPanel jPanelBotonesPrincipales;
    private javax.swing.JPanel jPanelCabecera;
    private javax.swing.JPanel jPanelClientes;
    private javax.swing.JPanel jPanelContabilidad;
    private javax.swing.JPanel jPanelLocales;
    private javax.swing.JPanel jPanelMenu;
    private javax.swing.JPanel jPanelPiePagina;
    private javax.swing.JPanel jPanelPrincipal;
    private javax.swing.JPanel jPanelTitulo;
    private javax.swing.JPanel jPanelUsuario;
    private javax.swing.JTabbedPane jTabbedPaneCategorias;
    // End of variables declaration//GEN-END:variables

}
